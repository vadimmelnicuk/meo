:root {
  color-scheme: light dark;
  --meo-active-line-bg: color-mix(in srgb, var(--vscode-editor-selectionBackground) 75%, #000);
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

body {
  font-family: var(--vscode-font-family);
  color: var(--vscode-editor-foreground);
  background: var(--vscode-editor-background);
  line-height: 1.5em;
}

#app {
  height: 100%;
}

.editor-root {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.mode-toolbar {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: 8px 10px;
  background: color-mix(in srgb, var(--vscode-editor-background) 88%, #000);
}

.editor-root[data-mode='live'] .mode-group {
  border-color: var(--vscode-focusBorder);
}

.mode-group {
  display: inline-flex;
  gap: 2px;
  border: 1px solid var(--vscode-button-border, var(--vscode-panel-border));
  border-radius: 7px;
  padding: 2px;
}

.mode-button {
  font: inherit;
  font-size: 12px;
  line-height: 1.2;
  border: 0;
  border-radius: 5px;
  padding: 2px 5px;
  color: var(--vscode-foreground);
  background: transparent;
  cursor: pointer;
}

.mode-button:hover {
  background: var(--vscode-toolbar-hoverBackground);
}

.mode-button.is-active {
  color: var(--vscode-button-foreground);
  background: var(--vscode-button-background);
}

.mode-button:focus-visible {
  outline: 1px solid var(--vscode-focusBorder);
  outline-offset: 1px;
}

.editor-host {
  min-height: 0;
  flex: 1;
}

.cm-editor {
  height: 100%;
  font-family: var(--vscode-editor-font-family);
  font-size: var(--vscode-editor-font-size);
}

.cm-scroller {
  font-family: inherit;
}

.cm-editor .cm-gutters {
  background: var(--vscode-editor-background);
  border-right: 0;
  width: 55px;
  margin-right: 24px;
}

.cm-lineNumbers {
  width: 100%;
}

.cm-editor .cm-lineNumbers .cm-gutterElement {
  width: 100%;
  box-sizing: border-box;
  text-align: right;
  color: color-mix(in srgb, var(--vscode-editorLineNumber-foreground, var(--vscode-descriptionForeground)) 82%, transparent);
}

.cm-editor .cm-gutter.cm-lineNumbers {
  user-select: none;
  -webkit-user-select: none;
}

.cm-editor .cm-gutterElement.cm-activeLineGutter {
  background: transparent !important;
  color: var(--vscode-editor-foreground) !important;
}

.cm-editor .cm-line {
  padding-left: 0;
  line-height: 1.5em;
}

.cm-editor .cm-content ::selection,
.cm-editor .cm-content *::selection {
  background-color: var(--vscode-editor-selectionBackground) !important;
  color: var(--vscode-editor-selectionForeground) !important;
}

.cm-editor .cm-selectionLayer {
  display: none;
}

.cm-editor.cm-focused .cm-activeLine {
  background-color: var(--meo-active-line-bg);
}

.cm-editor:not(.cm-focused) .cm-activeLine {
  background-color: var(--meo-active-line-bg);
}

.cm-editor.has-selection .cm-activeLine {
  background-color: transparent;
}

.cm-editor .cm-activeLine.meo-md-code-block {
  background-color: var(--vscode-textCodeBlock-background);
}

.cm-editor.meo-mode-live .meo-md-code-block .meo-md-fence-marker,
.cm-editor.meo-mode-live .meo-md-code-block .meo-md-fence-marker * {
  color: transparent !important;
}

.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-marker-active,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-marker-active * {
  color: var(--vscode-editor-foreground) !important;
}

.cm-editor .cm-cursor,
.cm-editor .cm-dropCursor {
  border-left-style: solid !important;
  border-left-width: 2px !important;
  border-left-color: var(--vscode-editorCursor-foreground, #ffffff) !important;
  opacity: 1 !important;
}

.cm-editor .cm-content {
  caret-color: var(--vscode-editorCursor-foreground, #ffffff);
}

.cm-editor.meo-mode-live .meo-md-marker {
  display: none;
}

.cm-editor.meo-mode-live .meo-md-marker-active {
  display: inline !important;
  color: var(--vscode-editor-foreground);
  line-height: inherit;
}

.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-em,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-strong,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-strike,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-inline-code,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-link {
  display: inline !important;
}

.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h1,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h2,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h3,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h4,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h5,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-h6,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-quote,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-code-block,
.cm-editor.meo-mode-live.cm-focused .cm-activeLine .meo-md-list-line {
  font-size: inherit !important;
  font-weight: inherit !important;
  color: inherit !important;
  border-left: none !important;
  background: inherit !important;
}

.cm-editor.meo-mode-live .cm-content {
  text-rendering: optimizeLegibility;
}

.cm-editor .meo-md-h1 {
  font-size: 1.8em;
  font-weight: 700;
}

.cm-editor .meo-md-h2 {
  font-size: 1.55em;
  font-weight: 700;
}

.cm-editor .meo-md-h3 {
  font-size: 1.3em;
  font-weight: 650;
}

.cm-editor .meo-md-h4,
.cm-editor .meo-md-h5,
.cm-editor .meo-md-h6 {
  font-weight: 650;
}

.cm-editor.meo-mode-live .cm-line.meo-md-h1:not(.cm-activeLine),
.cm-editor.meo-mode-live .cm-line.meo-md-h2:not(.cm-activeLine),
.cm-editor.meo-mode-live .cm-line.meo-md-h3:not(.cm-activeLine),
.cm-editor.meo-mode-live .cm-line.meo-md-h4:not(.cm-activeLine),
.cm-editor.meo-mode-live .cm-line.meo-md-h5:not(.cm-activeLine),
.cm-editor.meo-mode-live .cm-line.meo-md-h6:not(.cm-activeLine) {
  margin-left: 0 !important;
  text-indent: 0 !important;
}

.cm-editor .meo-md-em {
  font-style: italic;
}

.cm-editor .meo-md-strong {
  font-weight: 700;
}

.cm-editor .meo-md-strike {
  text-decoration: line-through;
}

.cm-editor .meo-md-quote {
  color: var(--vscode-descriptionForeground);
  border-left: 2px solid var(--vscode-textBlockQuote-border);
  padding-left: 0.65rem;
}

.cm-editor .meo-md-inline-code {
  background: transparent;
}

.cm-editor .meo-md-code-block {
  background: var(--vscode-textCodeBlock-background);
  padding-left: 2ch;
  position: relative;
}

.meo-copy-code-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 12px;
  font-family: var(--vscode-editor-font-family);
  padding: 0 8px;
  border: 1px solid var(--vscode-button-border, var(--vscode-panel-border));
  border-radius: 4px;
  background: var(--vscode-button-background);
  color: var(--vscode-button-foreground);
  cursor: pointer;
  transition: background-color 0.15s ease;
  height: 1.5em;
  box-sizing: border-box;
}

.meo-copy-code-btn:hover {
  background: var(--vscode-button-hoverBackground);
}

.meo-copy-code-btn:focus {
  outline: 1px solid var(--vscode-focusBorder);
  outline-offset: 1px;
}

.meo-copy-code-btn.copied {
  color: var(--vscode-terminal-ansiGreen);
}

.cm-editor .meo-md-link {
  color: var(--vscode-textLink-foreground);
  text-decoration: underline;
}

.cm-editor .meo-md-list-marker {
  display: inline;
  color: color-mix(in srgb, var(--vscode-editor-foreground) 72%, transparent);
}

.cm-editor .meo-md-list-marker-ordered {
  min-width: 3ch;
}

.cm-editor .meo-md-list-border {
  display: inline-block;
  box-sizing: border-box;
  height: 100%;
  border-left: 1px solid var(--vscode-panel-border);
}

.cm-editor .meo-md-list-marker-task {
  min-width: 3ch;
  letter-spacing: -0.02em;
}

/* Code block syntax highlighting tokens - VS Code theme */
.meo-src-code-block .tok-keyword,
.meo-md-code-block .tok-keyword {
  color: var(--tok-keyword, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-string,
.meo-md-code-block .tok-string {
  color: var(--tok-string, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-string-2,
.meo-md-code-block .tok-string-2 {
  color: var(--tok-string-2, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-number,
.meo-md-code-block .tok-number {
  color: var(--tok-number, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-comment,
.meo-md-code-block .tok-comment {
  color: var(--tok-comment, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-function,
.meo-md-code-block .tok-function {
  color: var(--tok-function, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-functionVariable,
.meo-md-code-block .tok-functionVariable {
  color: var(--tok-functionVariable, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-variableName,
.meo-md-code-block .tok-variableName {
  color: var(--tok-variableName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-typeName,
.meo-md-code-block .tok-typeName {
  color: var(--tok-typeName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-className,
.meo-md-code-block .tok-className {
  color: var(--tok-className, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-operator,
.meo-md-code-block .tok-operator {
  color: var(--tok-operator, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-punctuation,
.meo-md-code-block .tok-punctuation {
  color: var(--tok-punctuation, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-propertyName,
.meo-md-code-block .tok-propertyName {
  color: var(--tok-propertyName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-atom,
.meo-md-code-block .tok-atom {
  color: var(--tok-atom, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-bool,
.meo-md-code-block .tok-bool {
  color: var(--tok-bool, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-null,
.meo-md-code-block .tok-null {
  color: var(--tok-null, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-definition,
.meo-md-code-block .tok-definition {
  color: var(--tok-definition, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-labelName,
.meo-md-code-block .tok-labelName {
  color: var(--tok-labelName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-tagName,
.meo-md-code-block .tok-tagName {
  color: var(--tok-tagName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-attributeName,
.meo-md-code-block .tok-attributeName {
  color: var(--tok-attributeName, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-attributeValue,
.meo-md-code-block .tok-attributeValue {
  color: var(--tok-attributeValue, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-meta,
.meo-md-code-block .tok-meta {
  color: var(--tok-meta, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-heading,
.meo-md-code-block .tok-heading {
  color: var(--tok-heading, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-escapedChar,
.meo-md-code-block .tok-escapedChar {
  color: var(--tok-escapedChar, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-special,
.meo-md-code-block .tok-special {
  color: var(--tok-special, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-contentSeparator,
.meo-md-code-block .tok-contentSeparator {
  color: var(--tok-contentSeparator, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-strong,
.meo-md-code-block .tok-strong {
  font-weight: bold;
}

.meo-src-code-block .tok-emphasis,
.meo-md-code-block .tok-emphasis {
  font-style: italic;
}

.meo-src-code-block .tok-deleted,
.meo-md-code-block .tok-deleted {
  color: var(--tok-deleted, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-inserted,
.meo-md-code-block .tok-inserted {
  color: var(--tok-inserted, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-link,
.meo-md-code-block .tok-link {
  color: var(--tok-link, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-url,
.meo-md-code-block .tok-url {
  color: var(--tok-url, var(--vscode-editor-foreground));
}

.meo-src-code-block .tok-processingInstruction,
.meo-md-code-block .tok-processingInstruction {
  color: var(--tok-processingInstruction, var(--vscode-editor-foreground));
}
